{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/djonatan.bonelli/Documents/GitHub/FullCrypt/app/crypto/AES-GCM.ts"],"sourcesContent":["export const generateKey = async () =>\r\n  await crypto.subtle.generateKey({ name: \"AES-GCM\", length: 256 }, true, [\"encrypt\", \"decrypt\"]);\r\n\r\nexport const importKey = async (base64Key: string) => {\r\n  const raw = Uint8Array.from(atob(base64Key), c => c.charCodeAt(0));\r\n  return await crypto.subtle.importKey(\"raw\", raw, \"AES-GCM\", true, [\"encrypt\", \"decrypt\"]);\r\n};\r\n\r\nexport const encryptData = async (data: ArrayBuffer, key: CryptoKey, iv: Uint8Array) =>\r\n  await crypto.subtle.encrypt({ name: \"AES-GCM\", iv }, key, data);\r\n\r\nexport const decryptData = async (data: ArrayBuffer, key: CryptoKey, iv: Uint8Array) =>\r\n  await crypto.subtle.decrypt({ name: \"AES-GCM\", iv }, key, data);\r\n"],"names":[],"mappings":";;;;;;;;;;AAAO,MAAM,cAAc,UACzB,MAAM,OAAO,MAAM,CAAC,WAAW,CAAC;QAAE,MAAM;QAAW,QAAQ;IAAI,GAAG,MAAM;QAAC;QAAW;KAAU;AAEzF,MAAM,YAAY,OAAO;IAC9B,MAAM,MAAM,WAAW,IAAI,CAAC,KAAK,YAAY,CAAA,IAAK,EAAE,UAAU,CAAC;IAC/D,OAAO,MAAM,OAAO,MAAM,CAAC,SAAS,CAAC,OAAO,KAAK,WAAW,MAAM;QAAC;QAAW;KAAU;AAC1F;AAEO,MAAM,cAAc,OAAO,MAAmB,KAAgB,KACnE,MAAM,OAAO,MAAM,CAAC,OAAO,CAAC;QAAE,MAAM;QAAW;IAAG,GAAG,KAAK;AAErD,MAAM,cAAc,OAAO,MAAmB,KAAgB,KACnE,MAAM,OAAO,MAAM,CAAC,OAAO,CAAC;QAAE,MAAM;QAAW;IAAG,GAAG,KAAK","debugId":null}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/djonatan.bonelli/Documents/GitHub/FullCrypt/app/cloud/handlers/uploadHandlers.ts"],"sourcesContent":["import { encryptData, generateKey } from \"../../crypto/AES-GCM\";\r\n\r\nexport const handleUpload = async (file: File, setStatus: any, loadArquivos: any) => {\r\n  const arrayBuffer = await file.arrayBuffer();\r\n  const key = await generateKey();\r\n  const nonce = crypto.getRandomValues(new Uint8Array(12));\r\n  const encrypted = await encryptData(arrayBuffer, key, nonce);\r\n\r\n  const formData = new FormData();\r\n  formData.append(\"file\", new Blob([encrypted]), file.name);\r\n  formData.append(\"nome_arquivo\", file.name);\r\n  formData.append(\"nonce_file\", btoa(String.fromCharCode(...nonce)));\r\n\r\n  const res = await fetch(\"/api/upload\", { method: \"POST\", body: formData, credentials: \"include\" });\r\n\r\n  if (res.ok) {\r\n    setStatus(\"Arquivo criptografado e enviado!\");\r\n    const rawKey = await crypto.subtle.exportKey(\"raw\", key);\r\n    const dekBase64 = btoa(String.fromCharCode(...new Uint8Array(rawKey)));\r\n    const blob = new Blob([dekBase64], { type: \"text/plain\" });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = `${file.name}-key.txt`;\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n    loadArquivos();\r\n  } else {\r\n    setStatus(\"Erro no upload\");\r\n  }\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,eAAe,OAAO,MAAY,WAAgB;IAC7D,MAAM,cAAc,MAAM,KAAK,WAAW;IAC1C,MAAM,MAAM,MAAM,IAAA,0IAAW;IAC7B,MAAM,QAAQ,OAAO,eAAe,CAAC,IAAI,WAAW;IACpD,MAAM,YAAY,MAAM,IAAA,0IAAW,EAAC,aAAa,KAAK;IAEtD,MAAM,WAAW,IAAI;IACrB,SAAS,MAAM,CAAC,QAAQ,IAAI,KAAK;QAAC;KAAU,GAAG,KAAK,IAAI;IACxD,SAAS,MAAM,CAAC,gBAAgB,KAAK,IAAI;IACzC,SAAS,MAAM,CAAC,cAAc,KAAK,OAAO,YAAY,IAAI;IAE1D,MAAM,MAAM,MAAM,MAAM,eAAe;QAAE,QAAQ;QAAQ,MAAM;QAAU,aAAa;IAAU;IAEhG,IAAI,IAAI,EAAE,EAAE;QACV,UAAU;QACV,MAAM,SAAS,MAAM,OAAO,MAAM,CAAC,SAAS,CAAC,OAAO;QACpD,MAAM,YAAY,KAAK,OAAO,YAAY,IAAI,IAAI,WAAW;QAC7D,MAAM,OAAO,IAAI,KAAK;YAAC;SAAU,EAAE;YAAE,MAAM;QAAa;QACxD,MAAM,MAAM,IAAI,eAAe,CAAC;QAChC,MAAM,IAAI,SAAS,aAAa,CAAC;QACjC,EAAE,IAAI,GAAG;QACT,EAAE,QAAQ,GAAG,GAAG,KAAK,IAAI,CAAC,QAAQ,CAAC;QACnC,EAAE,KAAK;QACP,IAAI,eAAe,CAAC;QACpB;IACF,OAAO;QACL,UAAU;IACZ;AACF","debugId":null}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/djonatan.bonelli/Documents/GitHub/FullCrypt/app/cloud/components/FileUpload.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport { handleUpload } from \"../handlers/uploadHandlers\";\r\n\r\nexport default function FileUpload({ loadArquivos }: { loadArquivos: () => void }) {\r\n  const [file, setFile] = useState<File | null>(null);\r\n  const [preview, setPreview] = useState<string | null>(null);\r\n  const [status, setStatus] = useState(\"\");\r\n\r\n  return (\r\n    <div>\r\n      <h1>Upload criptografado</h1>\r\n      <input type=\"file\" accept=\"image/*\" onChange={(e) => {\r\n        const f = e.target.files?.[0];\r\n        if (f) { setFile(f); setPreview(URL.createObjectURL(f)); }\r\n      }}/>\r\n      {preview && <img src={preview} alt=\"preview\" style={{ maxWidth: 300 }} />}\r\n      <button disabled={!file} onClick={() => file && handleUpload(file, setStatus, loadArquivos)}>\r\n        üîê Criptografar e enviar\r\n      </button>\r\n      <p>{status}</p>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS,WAAW,EAAE,YAAY,EAAgC;IAC/E,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAgB;IACtD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IAErC,qBACE,8OAAC;;0BACC,8OAAC;0BAAG;;;;;;0BACJ,8OAAC;gBAAM,MAAK;gBAAO,QAAO;gBAAU,UAAU,CAAC;oBAC7C,MAAM,IAAI,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;oBAC7B,IAAI,GAAG;wBAAE,QAAQ;wBAAI,WAAW,IAAI,eAAe,CAAC;oBAAK;gBAC3D;;;;;;YACC,yBAAW,8OAAC;gBAAI,KAAK;gBAAS,KAAI;gBAAU,OAAO;oBAAE,UAAU;gBAAI;;;;;;0BACpE,8OAAC;gBAAO,UAAU,CAAC;gBAAM,SAAS,IAAM,QAAQ,IAAA,0JAAY,EAAC,MAAM,WAAW;0BAAe;;;;;;0BAG7F,8OAAC;0BAAG;;;;;;;;;;;;AAGV","debugId":null}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/djonatan.bonelli/Documents/GitHub/FullCrypt/app/cloud/handlers/downloadHandlers.ts"],"sourcesContent":["import { importKey, decryptData } from \"../../crypto/AES-GCM\";\r\n\r\nexport const handleDownload = async (arq: any, userKey: string, setStatus: any) => {\r\n  if (!userKey) return alert(\"Informe a chave para descriptografar!\");\r\n\r\n  try {\r\n    const key = await importKey(userKey);\r\n    const res = await fetch(`/api/download/${arq.id}`, { credentials: \"include\" });\r\n    if (!res.ok) throw new Error(\"Erro ao baixar arquivo\");\r\n    const encrypted = await res.arrayBuffer();\r\n    const iv = new Uint8Array(12); // TODO: usar nonce real\r\n    const decrypted = await decryptData(encrypted, key, iv);\r\n    const blob = new Blob([decrypted]);\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = arq.nome_arquivo;\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n  } catch (err) {\r\n    console.error(err);\r\n    setStatus(\"Erro ao descriptografar arquivo\");\r\n  }\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,iBAAiB,OAAO,KAAU,SAAiB;IAC9D,IAAI,CAAC,SAAS,OAAO,MAAM;IAE3B,IAAI;QACF,MAAM,MAAM,MAAM,IAAA,wIAAS,EAAC;QAC5B,MAAM,MAAM,MAAM,MAAM,CAAC,cAAc,EAAE,IAAI,EAAE,EAAE,EAAE;YAAE,aAAa;QAAU;QAC5E,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;QAC7B,MAAM,YAAY,MAAM,IAAI,WAAW;QACvC,MAAM,KAAK,IAAI,WAAW,KAAK,wBAAwB;QACvD,MAAM,YAAY,MAAM,IAAA,0IAAW,EAAC,WAAW,KAAK;QACpD,MAAM,OAAO,IAAI,KAAK;YAAC;SAAU;QACjC,MAAM,MAAM,IAAI,eAAe,CAAC;QAChC,MAAM,IAAI,SAAS,aAAa,CAAC;QACjC,EAAE,IAAI,GAAG;QACT,EAAE,QAAQ,GAAG,IAAI,YAAY;QAC7B,EAAE,KAAK;QACP,IAAI,eAAe,CAAC;IACtB,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC;QACd,UAAU;IACZ;AACF","debugId":null}},
    {"offset": {"line": 204, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/djonatan.bonelli/Documents/GitHub/FullCrypt/app/cloud/components/FileList.tsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport { handleDownload } from \"../handlers/downloadHandlers\";\r\n\r\nexport default function FileList({ arquivos, userKey, setStatus }: any) {\r\n\r\n  return (\r\n    <>\r\n      <ul>\r\n        {arquivos.map((a: any) => (\r\n          <li key={a.id}>\r\n            {a.nome_arquivo} ({new Date(a.criado_em).toLocaleString(\"pt-BR\")})\r\n            <button style={{ marginLeft: 10 }} onClick={() => handleDownload(a, userKey, setStatus)}>\r\n              üîì Download\r\n            </button>   \r\n          </li>\r\n        ))}\r\n      </ul>\r\n\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIe,SAAS,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,SAAS,EAAO;IAEpE,qBACE;kBACE,cAAA,8OAAC;sBACE,SAAS,GAAG,CAAC,CAAC,kBACb,8OAAC;;wBACE,EAAE,YAAY;wBAAC;wBAAG,IAAI,KAAK,EAAE,SAAS,EAAE,cAAc,CAAC;wBAAS;sCACjE,8OAAC;4BAAO,OAAO;gCAAE,YAAY;4BAAG;4BAAG,SAAS,IAAM,IAAA,8JAAc,EAAC,GAAG,SAAS;sCAAY;;;;;;;mBAFlF,EAAE,EAAE;;;;;;;;;;;AAWvB","debugId":null}},
    {"offset": {"line": 250, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/djonatan.bonelli/Documents/GitHub/FullCrypt/app/cloud/components/KeyInput.tsx"],"sourcesContent":["export default function KeyInput({ userKey, setUserKey }: any) {\r\n  return (\r\n    <input\r\n      type=\"text\"\r\n      placeholder=\"Chave do usu√°rio (Base64)\"\r\n      value={userKey}\r\n      onChange={(e) => setUserKey(e.target.value)}\r\n      style={{ marginBottom: 10, width: \"100%\" }}\r\n    />\r\n  );\r\n}\r\n    "],"names":[],"mappings":";;;;;;AAAe,SAAS,SAAS,EAAE,OAAO,EAAE,UAAU,EAAO;IAC3D,qBACE,8OAAC;QACC,MAAK;QACL,aAAY;QACZ,OAAO;QACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;QAC1C,OAAO;YAAE,cAAc;YAAI,OAAO;QAAO;;;;;;AAG/C","debugId":null}},
    {"offset": {"line": 276, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/djonatan.bonelli/Documents/GitHub/FullCrypt/app/cloud/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport FileUpload from \"./components/FileUpload\";\r\nimport FileList from \"./components/FileList\";\r\nimport KeyInput from \"./components/KeyInput\";\r\n\r\nexport default function CloudPage() {\r\n  const [arquivos, setArquivos] = useState([]);\r\n  const [userKey, setUserKey] = useState(\"\");\r\n  const [status, setStatus] = useState(\"\");\r\n\r\n  const loadArquivos = async () => {\r\n    const res = await fetch(\"/api/archives\", { credentials: \"include\" });\r\n    const data = await res.json();\r\n    setArquivos(data);\r\n  };\r\n\r\n  useEffect(() => { loadArquivos(); }, []);\r\n\r\n  return (\r\n    <div style={{ padding: 20 }}>\r\n      <FileUpload loadArquivos={loadArquivos} />\r\n      <h2>üìÇ Arquivos</h2>\r\n      <KeyInput userKey={userKey} setUserKey={setUserKey} />\r\n      <FileList arquivos={arquivos} userKey={userKey} setStatus={setStatus} />\r\n      <p>{status}</p>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AAJA;;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC,EAAE;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IAErC,MAAM,eAAe;QACnB,MAAM,MAAM,MAAM,MAAM,iBAAiB;YAAE,aAAa;QAAU;QAClE,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,YAAY;IACd;IAEA,IAAA,kNAAS,EAAC;QAAQ;IAAgB,GAAG,EAAE;IAEvC,qBACE,8OAAC;QAAI,OAAO;YAAE,SAAS;QAAG;;0BACxB,8OAAC,oJAAU;gBAAC,cAAc;;;;;;0BAC1B,8OAAC;0BAAG;;;;;;0BACJ,8OAAC,kJAAQ;gBAAC,SAAS;gBAAS,YAAY;;;;;;0BACxC,8OAAC,kJAAQ;gBAAC,UAAU;gBAAU,SAAS;gBAAS,WAAW;;;;;;0BAC3D,8OAAC;0BAAG;;;;;;;;;;;;AAGV","debugId":null}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/djonatan.bonelli/Documents/GitHub/FullCrypt/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 378, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/djonatan.bonelli/Documents/GitHub/FullCrypt/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 383, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/djonatan.bonelli/Documents/GitHub/FullCrypt/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}